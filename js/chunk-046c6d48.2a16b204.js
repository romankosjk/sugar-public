(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-046c6d48"],{"231f":function(t,e,r){},d39b:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.product?r("div",{staticClass:"product"},[r("div",{staticClass:"product-title d-flex mb-2"},[r("h4",[t._v(t._s(t.product.title))]),r("button",{staticClass:"btn btn-outline-success ml-auto",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.prev(e)}}},[t._v("Назад")])]),r("div",{staticClass:"product-container d-flex mb-4"},[r("div",{staticClass:"product-container__avatar mr-2"},[t.product.image?r("img",{staticClass:"mx-auto",attrs:{src:t.product.image}}):t._e()]),r("div",{staticClass:"product-container__information text-center w-100 mt-auto"},[r("p",{staticClass:"text-center h6 text-primary"},[t._v("На "),r("strong",[t._v(t._s(t.gram))]),t._v(" гр. продукту")]),r("div",{staticClass:"information-items d-flex"},[r("div",{staticClass:"information flex-fill d-flex flex-column"},[r("span",{staticClass:"information__header"},[t._v("БЖ")]),r("span",{staticClass:"information__footer"},[t._v(t._s(t.bxbjCalc(t.bxCalc(t.product.product_b),t.bjCalc(t.product.product_j))))])]),r("div",{staticClass:"information flex-fill d-flex flex-column"},[r("span",{staticClass:"information__header"},[t._v("У")]),r("span",{staticClass:"information__footer"},[t._v(t._s(t.byCalc(t.product.product_y)))])]),r("div",{staticClass:"information flex-fill d-flex flex-column"},[r("span",{staticClass:"information__header"},[t._v("ХЕ")]),r("span",{staticClass:"information__footer"},[t._v(t._s(t.allCalc(t.bxCalc(t.product.product_b),t.bjCalc(t.product.product_j),t.byCalc(t.product.product_y))))])])])])]),r("div",{staticClass:"product-form"},[r("form",{staticClass:"mb-3",on:{submit:t.setProducts}},[r("div",{staticClass:"mb-3"},[r("label",{staticClass:"form-label",attrs:{for:"productInput"}},[t._v("Количесво грамм")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.gram,expression:"gram"}],staticClass:"form-control",attrs:{type:"number",id:"productInput",placeholder:"100"},domProps:{value:t.gram},on:{input:function(e){e.target.composing||(t.gram=e.target.value)}}})]),r("div",{staticClass:"d-flex"},[r("router-link",{staticClass:"btn btn-success d-flex align-items-center",attrs:{to:"/edit/"+t.product._id}},[r("b-icon",{attrs:{icon:"tools","aria-hidden":"true"}})],1),r("button",{staticClass:"btn btn-success w-100 text-center mx-1",attrs:{type:"submit"}},[r("b-icon",{staticClass:"mr-2",attrs:{icon:"house-door","aria-hidden":"true"}}),t._v(" Добавить ")],1),r("b-button",{ref:"button",staticClass:"d-flex align-items-center",attrs:{variant:"danger",id:"popover-remove"}},[r("b-icon",{attrs:{icon:"x-circle","aria-hidden":"true"}})],1)],1)]),r("div",{staticClass:"d-flex"},[r("b-button",{staticClass:"w-100",attrs:{variant:"info"},on:{click:function(e){return e.preventDefault(),t.addDishes(e)}}},[t._v(" Создать блюдо ")]),r("b-popover",{ref:"popover",attrs:{target:"popover-remove",triggers:"click",show:t.popoverShow,placement:"auto",container:"my-container"},on:{"update:show":function(e){t.popoverShow=e}},scopedSlots:t._u([{key:"title",fn:function(){return[r("b-button",{staticClass:"close",attrs:{"aria-label":"Close"},on:{click:t.onClose}},[r("span",{staticClass:"d-inline-block",attrs:{"aria-hidden":"true"}},[t._v("×")])]),t._v(" Вы уверены что хотите удалить продукт ")]},proxy:!0}],null,!1,93513824)},[r("div",{staticClass:"d-flex"},[r("b-button",{staticClass:"mr-2 w-100",attrs:{size:"sm",variant:"danger"},on:{click:t.onClose}},[t._v("Нет")]),r("b-button",{staticClass:"w-100",attrs:{size:"sm",variant:"primary"},on:{click:t.onOk}},[t._v("Да")])],1)])],1)])]):t._e()},n=[],o=(r("b680"),r("96cf"),r("1da1")),s={name:"Product",data:function(){return{product:null,gram:100,popoverShow:!1}},computed:{url:function(){return this.$route.params.page},isOnline:function(){return window.navigator.onLine},productInfo:function(){return this.$store.state.productInfo},productIds:function(){return this.$store.state.productIds},bx_param:{get:function(){return this.$store.state.option.bx_param}},bj_param:{get:function(){return this.$store.state.option.bj_param}}},methods:{prev:function(){this.$router.back()},calculate:function(t){return parseFloat(t)*this.gram/100},bxCalc:function(t){return(this.calculate(t)*parseFloat(this.bx_param)/12).toFixed(1)},bjCalc:function(t){return(this.calculate(t)*parseFloat(this.bj_param)/12).toFixed(1)},byCalc:function(t){return(this.calculate(t)/12).toFixed(1)},bxbjCalc:function(t,e){return(parseFloat(t)+parseFloat(e)).toFixed(1)},allCalc:function(t,e,r){return(parseFloat(t)+parseFloat(e)+parseFloat(r)).toFixed(1)},getProducts:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$pouch.get(t.url).then((function(e){t.product=e,t.gram=t.product.gram}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))()},setProducts:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.preventDefault(),r.prev=1,e.product.gram=e.gram,e.product.is_home=1,r.next=6,e.$pouch.put(e.product);case 6:e.prev(),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](1),console.error(r.t0);case 12:case"end":return r.stop()}}),r,null,[[1,9]])})))()},addDishes:function(){this.product.dishes_gram=this.gram,this.$store.dispatch("setProductDishes",this.product)},removeProductFB:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$firebase.database().ref().child("product/".concat(t.product._id)).remove();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))()},onOk:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$pouch.remove({_id:t.product._id,_rev:t.product._rev}).then((function(){t.isOnline?t.removeProductFB().then((function(){t.$router.back()})):t.$router.back()})).catch((function(t){console.log(t)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))()},onClose:function(){this.popoverShow=!1}},mounted:function(){this.getProducts()}},c=s,i=(r("de7a"),r("2877")),u=Object(i["a"])(c,a,n,!1,null,"780a9864",null);e["default"]=u.exports},de7a:function(t,e,r){"use strict";r("231f")}}]);
//# sourceMappingURL=chunk-046c6d48.2a16b204.js.map