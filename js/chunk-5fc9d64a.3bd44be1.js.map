{"version":3,"sources":["webpack:///./src/pages/Dishes/Dishes.vue?ff8b","webpack:///./src/pages/Dishes/Dishes.vue?4f58","webpack:///src/pages/Dishes/Dishes.vue","webpack:///./src/pages/Dishes/Dishes.vue?641a","webpack:///./src/pages/Dishes/Dishes.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","dishes","title","attrs","on","$event","preventDefault","$router","push","name","image","_e","directives","rawName","value","expression","domProps","onChangeCalculate","target","composing","$set","calcFixed","calculatePortion","bx_var","dishes_portion","y_var","xe_var","ref","popoverShow","scopedSlots","_u","key","fn","onClose","proxy","onOk","_l","item","index","doc","dishes_gram","bxbjCalc","bxCalc","product_b","bjCalc","product_j","byCalc","product_y","allCalc","staticRenderFns","data","productIds","productList","percent","computed","url","$route","params","id","isOnline","window","navigator","onLine","bx_param","get","$store","state","option","bj_param","methods","prev","back","calculate","gram","toFixed","parseFloat","p1","p2","p3","v","plusAllCalculate","items","forEach","setDishes","mounted","getDishes","component"],"mappings":"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","file":"js/chunk-5fc9d64a.3bd44be1.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dishes.vue?vue&type=style&index=0&id=64de229c&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.dishes)?_c('div',{staticClass:\"dishes\"},[_c('div',{staticClass:\"dishes-title d-flex mb-2\"},[_c('h4',[_vm._v(_vm._s(_vm.dishes.title))]),_c('button',{staticClass:\"btn btn-outline-success ml-auto\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.preventDefault();return _vm.$router.push({name: 'DishesList'})}}},[_vm._v(\"Назад\")])]),_c('div',{staticClass:\"dishes-container d-flex mb-4\"},[_c('div',{staticClass:\"dishes-container__avatar mr-2\"},[(_vm.dishes.image)?_c('img',{staticClass:\"mx-auto\",attrs:{\"src\":_vm.dishes.image}}):_vm._e()]),_c('div',{staticClass:\"dishes-container__information text-center w-100 mt-auto\"},[_c('p',{staticClass:\"d-flex align-items-center justify-content-end mb-2\"},[_c('span',{staticClass:\"mr-1\"},[_vm._v(\"на\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.dishes.dishes_portion),expression:\"dishes.dishes_portion\"}],staticClass:\"form-control gram\",attrs:{\"type\":\"number\"},domProps:{\"value\":(_vm.dishes.dishes_portion)},on:{\"change\":_vm.onChangeCalculate,\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.dishes, \"dishes_portion\", $event.target.value)}}}),_c('span',{staticClass:\"ml-1\"},[_vm._v(\"г.\")])]),_c('div',{staticClass:\"information-items d-flex\"},[_c('div',{staticClass:\"information flex-fill d-flex flex-column\"},[_c('span',{staticClass:\"information__header\"},[_vm._v(\"БЖ\")]),_c('span',{staticClass:\"information__footer\"},[_vm._v(_vm._s(_vm.calcFixed(_vm.calculatePortion(_vm.bx_var, _vm.dishes.dishes_portion))))])]),_c('div',{staticClass:\"information flex-fill d-flex flex-column\"},[_c('span',{staticClass:\"information__header\"},[_vm._v(\"У\")]),_c('span',{staticClass:\"information__footer\"},[_vm._v(_vm._s(_vm.calcFixed(_vm.calculatePortion(_vm.y_var, _vm.dishes.dishes_portion))))])]),_c('div',{staticClass:\"information flex-fill d-flex flex-column\"},[_c('span',{staticClass:\"information__header\"},[_vm._v(\"ХЕ\")]),_c('span',{staticClass:\"information__footer\"},[_vm._v(_vm._s(_vm.calcFixed(_vm.calculatePortion(_vm.xe_var, _vm.dishes.dishes_portion))))])])])])]),_c('div',{staticClass:\"d-flex\"},[_c('b-button',{ref:\"button\",staticClass:\"ml-auto\",attrs:{\"variant\":\"danger\",\"id\":\"popover-remove\"}},[_c('b-icon',{attrs:{\"icon\":\"x-circle\",\"aria-hidden\":\"true\"}})],1),_c('b-popover',{ref:\"popover\",attrs:{\"target\":\"popover-remove\",\"triggers\":\"click\",\"show\":_vm.popoverShow,\"placement\":\"auto\",\"container\":\"my-container\"},on:{\"update:show\":function($event){_vm.popoverShow=$event}},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('b-button',{staticClass:\"close\",attrs:{\"aria-label\":\"Close\"},on:{\"click\":_vm.onClose}},[_c('span',{staticClass:\"d-inline-block\",attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"×\")])]),_vm._v(\" Вы уверены что хотите удалить блюдо \")]},proxy:true}],null,false,68580160)},[_c('div',{staticClass:\"d-flex\"},[_c('b-button',{staticClass:\"mr-2 w-100\",attrs:{\"size\":\"sm\",\"variant\":\"danger\"},on:{\"click\":_vm.onClose}},[_vm._v(\"Нет\")]),_c('b-button',{staticClass:\"w-100\",attrs:{\"size\":\"sm\",\"variant\":\"primary\"},on:{\"click\":_vm.onOk}},[_vm._v(\"Да\")])],1)])],1),_c('div',{staticClass:\"dishes-product\"},[_c('h3',[_vm._v(\"Продукты\")]),(_vm.productList)?_c('div',{staticClass:\"dishes-items\"},_vm._l((_vm.productList),function(item,index){return _c('div',{key:index,staticClass:\"d-block card dishes-item text-decoration-none mb-2\"},[_c('div',{staticClass:\"card-body d-flex\"},[_c('div',{staticClass:\"dishes-item__avatar mr-2\"},[(item.doc.image)?_c('img',{staticClass:\"mx-auto\",attrs:{\"src\":item.doc.image}}):_vm._e()]),_c('div',{staticClass:\"dishes-item__content w-100 d-flex flex-column\"},[_c('h6',[_vm._v(_vm._s(item.doc.title))]),_c('div',{staticClass:\"mt-auto\"},[_c('p',{staticClass:\"text-center text-primary m-0\"},[_vm._v(\"На \"),_c('strong',[_vm._v(_vm._s(item.doc.dishes_gram))]),_vm._v(\" гр. продукту\")]),_c('div',{staticClass:\"item-information d-flex text-center\"},[_c('div',{staticClass:\"item-information__item flex-fill d-flex flex-column\"},[_c('span',{staticClass:\"item-information__header\"},[_vm._v(\"БЖ\")]),_c('span',{staticClass:\"item-information__footer\"},[_vm._v(_vm._s(_vm.bxbjCalc(_vm.bxCalc(item.doc.product_b, item.doc.dishes_gram), _vm.bjCalc(item.doc.product_j, item.doc.dishes_gram))))])]),_c('div',{staticClass:\"item-information__item flex-fill d-flex flex-column\"},[_c('span',{staticClass:\"item-information__header\"},[_vm._v(\"У\")]),_c('span',{staticClass:\"item-information__footer\"},[_vm._v(_vm._s(_vm.byCalc(item.doc.product_y, item.doc.dishes_gram)))])]),_c('div',{staticClass:\"item-information__item flex-fill d-flex flex-column\"},[_c('span',{staticClass:\"item-information__header\"},[_vm._v(\"ХЕ\")]),_c('span',{staticClass:\"item-information__footer\"},[_vm._v(_vm._s(_vm.allCalc(_vm.bxCalc(item.doc.product_b, item.doc.dishes_gram),_vm.bjCalc(item.doc.product_j, item.doc.dishes_gram),_vm.byCalc(item.doc.product_y, item.doc.dishes_gram))))])])])])])])])}),0):_vm._e()])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"dishes\" v-if=\"dishes\">\r\n    <div class=\"dishes-title d-flex mb-2\">\r\n      <h4>{{ dishes.title }}</h4>\r\n      <button type=\"button\" class=\"btn btn-outline-success ml-auto\" @click.prevent=\"$router.push({name: 'DishesList'})\">Назад</button>\r\n    </div>\r\n    <div class=\"dishes-container d-flex mb-4\">\r\n      <div class=\"dishes-container__avatar mr-2\">\r\n        <img class=\"mx-auto\" v-if=\"dishes.image\" :src=\"dishes.image\"/>\r\n      </div>\r\n      <div class=\"dishes-container__information text-center w-100 mt-auto\">\r\n        <p class=\"d-flex align-items-center justify-content-end mb-2\">\r\n          <span class=\"mr-1\">на</span>\r\n          <input @change=\"onChangeCalculate\" v-model=\"dishes.dishes_portion\" type=\"number\" class=\"form-control gram\">\r\n          <span class=\"ml-1\">г.</span>\r\n        </p>\r\n        <div class=\"information-items d-flex\">\r\n          <div class=\"information flex-fill d-flex flex-column\">\r\n            <span class=\"information__header\">БЖ</span>\r\n            <span class=\"information__footer\">{{ calcFixed(calculatePortion(bx_var, dishes.dishes_portion))}}</span>\r\n          </div>\r\n          <div class=\"information flex-fill d-flex flex-column\">\r\n            <span class=\"information__header\">У</span>\r\n            <span class=\"information__footer\">{{  calcFixed(calculatePortion(y_var, dishes.dishes_portion))}}</span>\r\n          </div>\r\n          <div class=\"information flex-fill d-flex flex-column\">\r\n            <span class=\"information__header\">ХЕ</span>\r\n            <span class=\"information__footer\">{{  calcFixed(calculatePortion(xe_var, dishes.dishes_portion))}}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"d-flex\">\r\n<!--      <router-link :to=\"`/edit/${dishes._id}`\" class=\"btn btn-primary\">-->\r\n<!--        <b-icon icon=\"arrow-clockwise\" aria-hidden=\"true\"></b-icon>-->\r\n<!--      </router-link>-->\r\n      <b-button variant=\"danger\" class=\"ml-auto\" id=\"popover-remove\" ref=\"button\">\r\n        <b-icon icon=\"x-circle\" aria-hidden=\"true\"></b-icon>\r\n      </b-button>\r\n      <b-popover\r\n          target=\"popover-remove\"\r\n          triggers=\"click\"\r\n          :show.sync=\"popoverShow\"\r\n          placement=\"auto\"\r\n          container=\"my-container\"\r\n          ref=\"popover\"\r\n      >\r\n        <template #title>\r\n          <b-button @click=\"onClose\" class=\"close\" aria-label=\"Close\">\r\n            <span class=\"d-inline-block\" aria-hidden=\"true\">&times;</span>\r\n          </b-button>\r\n          Вы уверены что хотите удалить блюдо\r\n        </template>\r\n        <div class=\"d-flex\">\r\n          <b-button @click=\"onClose\" size=\"sm\" variant=\"danger\" class=\"mr-2 w-100\">Нет</b-button>\r\n          <b-button @click=\"onOk\" size=\"sm\" variant=\"primary\" class=\"w-100\">Да</b-button>\r\n        </div>\r\n      </b-popover>\r\n    </div>\r\n    <div class=\"dishes-product\">\r\n      <h3>Продукты</h3>\r\n      <div class=\"dishes-items\" v-if=\"productList\">\r\n        <div class=\"d-block card dishes-item text-decoration-none mb-2\"  v-for=\"(item, index) in productList\" :key=\"index\">\r\n          <div class=\"card-body d-flex\">\r\n            <div class=\"dishes-item__avatar mr-2\">\r\n              <img class=\"mx-auto\" v-if=\"item.doc.image\" :src=\"item.doc.image\"/>\r\n            </div>\r\n            <div class=\"dishes-item__content w-100 d-flex flex-column\">\r\n              <h6>{{item.doc.title}}</h6>\r\n              <div class=\"mt-auto\">\r\n                <p class=\"text-center text-primary m-0\">На <strong>{{ item.doc.dishes_gram }}</strong> гр. продукту</p>\r\n                <div class=\"item-information d-flex text-center\">\r\n                  <div class=\"item-information__item flex-fill d-flex flex-column\">\r\n                    <span class=\"item-information__header\">БЖ</span>\r\n                    <span class=\"item-information__footer\">{{ bxbjCalc(bxCalc(item.doc.product_b, item.doc.dishes_gram), bjCalc(item.doc.product_j, item.doc.dishes_gram))}}</span>\r\n                  </div>\r\n                  <div class=\"item-information__item flex-fill d-flex flex-column\">\r\n                    <span class=\"item-information__header\">У</span>\r\n                    <span class=\"item-information__footer\">{{ byCalc(item.doc.product_y, item.doc.dishes_gram)}}</span>\r\n                  </div>\r\n                  <div class=\"item-information__item flex-fill d-flex flex-column\">\r\n                    <span class=\"item-information__header\">ХЕ</span>\r\n                    <span class=\"item-information__footer\">{{ allCalc(bxCalc(item.doc.product_b, item.doc.dishes_gram),bjCalc(item.doc.product_j, item.doc.dishes_gram),byCalc(item.doc.product_y, item.doc.dishes_gram))}}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'Dishes',\r\n  data() {\r\n    return {\r\n      productIds: [],\r\n      productList: [],\r\n      percent: 0,\r\n      dishes: null,\r\n      popoverShow: false,\r\n      bx_var: 0,\r\n      y_var: 0,\r\n      xe_var: 0,\r\n    }\r\n  },\r\n  computed: {\r\n    url() {\r\n      return this.$route.params.id\r\n    },\r\n    isOnline() {\r\n      return window.navigator.onLine;\r\n    },\r\n    bx_param: {\r\n      get() {\r\n        return this.$store.state.option.bx_param\r\n      }\r\n    },\r\n    bj_param: {\r\n      get() {\r\n        return this.$store.state.option.bj_param\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    prev() {\r\n      this.$router.back()\r\n    },\r\n    calculate(value, gram) {\r\n      return (parseFloat(value) * gram) / 100\r\n    },\r\n    calculatePortion(value, gram) {\r\n      return (parseFloat(value) * gram) / this.percent\r\n    },\r\n    bxCalc(value, gram) {\r\n      return ((this.calculate(value, gram) * parseFloat(this.bx_param)) / 12).toFixed(1);\r\n    },\r\n    bjCalc(value, gram) {\r\n      return ((this.calculate(value, gram) * parseFloat(this.bj_param)) / 12).toFixed(1);\r\n    },\r\n    byCalc(value, gram) {\r\n      return (this.calculate(value, gram) / 12).toFixed(1);\r\n    },\r\n    bxbjCalc(p1, p2) {\r\n      return (parseFloat(p1) + parseFloat(p2)).toFixed(1);\r\n    },\r\n    allCalc(p1, p2, p3) {\r\n      return (parseFloat(p1) + parseFloat(p2) + parseFloat(p3)).toFixed(1);\r\n    },\r\n    calcFixed(v) {\r\n      return v.toFixed(1);\r\n    },\r\n    plusAllCalculate(items) {\r\n      items.forEach((item)=> {\r\n        this.bx_var += (parseFloat(this.bxCalc(item.doc.product_b, item.doc.dishes_gram)) + parseFloat(this.bjCalc(item.doc.product_j, item.doc.dishes_gram)));\r\n        this.y_var += (parseFloat(this.byCalc(item.doc.product_y, item.doc.dishes_gram)));\r\n        this.xe_var += (parseFloat(this.bxCalc(item.doc.product_b, item.doc.dishes_gram)) + parseFloat(this.bjCalc(item.doc.product_j, item.doc.dishes_gram)) + parseFloat(this.byCalc(item.doc.product_y, item.doc.dishes_gram)))\r\n      })\r\n    },\r\n    async setDishes() {\r\n      try {\r\n        await this.$pouch.put(this.dishes, {}, 'dishes').then((res)=>{\r\n          this.dishes._rev = res.rev\r\n        });\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n    },\r\n    async getDishes() {\r\n      try {\r\n        await this.$pouch.get(this.url, {}, 'dishes').then((res) => {\r\n          this.dishes = res;\r\n        });\r\n        if (this.dishes.itemIds.length){\r\n          this.dishes.itemIds.forEach((val) => {\r\n            this.productIds.push(val.id);\r\n          })\r\n        }\r\n        await this.$pouch.allDocs({\r\n          keys: this.productIds\r\n        }).then((res) => {\r\n          this.productList = res.rows;\r\n          this.length = this.productList.length;\r\n          if (this.productList.length){\r\n            this.productList.forEach((val, index) => {\r\n              val.doc.dishes_gram = this.dishes.itemIds[index].dishes_gram\r\n              this.percent += parseInt(val.doc.dishes_gram)\r\n            })\r\n            this.plusAllCalculate(this.productList)\r\n          }\r\n        });\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n    },\r\n\r\n    onChangeCalculate(){\r\n      this.setDishes();\r\n    },\r\n    //remove\r\n    async removeProductFB() {\r\n      try {\r\n        await this.$firebase.database().ref().child(`dishes/${this.dishes._id}`).remove()\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n    },\r\n    async onOk() {\r\n      try {\r\n        await this.$pouch.remove({\r\n          _id: this.dishes._id,\r\n          _rev: this.dishes._rev\r\n        },{}, 'dishes').then(() => {\r\n          if (this.isOnline) {\r\n            this.removeProductFB().then(() => {\r\n              this.$router.push({name: 'DishesList'})\r\n            })\r\n          } else  {\r\n            this.$router.push({name: 'DishesList'})\r\n          }\r\n        })\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n    },\r\n\r\n    onClose() {\r\n      this.popoverShow = false\r\n    },\r\n  },\r\n  mounted() {\r\n    this.getDishes()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.card-body {\r\n  padding: 5px;\r\n}\r\n.dishes {\r\n  .information-items {\r\n    .information {\r\n      margin: 0 2px;\r\n      .information__header {\r\n        border-bottom: 1px solid green;\r\n\r\n      }\r\n      .information__footer {\r\n        font-weight: 500;\r\n        font-size: 18px;\r\n      }\r\n    }\r\n  }\r\n  .item-information {\r\n    &__item {\r\n      margin: 0 2px;\r\n      .item-information__header {\r\n        border-bottom: 1px solid green;\r\n      }\r\n      .item-information__footer {\r\n        font-weight: 500;\r\n        font-size: 16px;\r\n      }\r\n    }\r\n  }\r\n  .dishes-container {\r\n    &__avatar {\r\n      width: 100px;\r\n      min-width: 100px;\r\n    }\r\n    &__information {\r\n      .gram {\r\n        max-width: 100px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dishes.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dishes.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Dishes.vue?vue&type=template&id=64de229c&scoped=true&\"\nimport script from \"./Dishes.vue?vue&type=script&lang=js&\"\nexport * from \"./Dishes.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Dishes.vue?vue&type=style&index=0&id=64de229c&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"64de229c\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}