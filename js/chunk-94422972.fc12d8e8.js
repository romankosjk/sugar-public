(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-94422972"],{"0619":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"setting"},[n("h5",[t._v("Синхронизировать базу")]),n("div",{staticClass:"card"},[n("div",{staticClass:"card-body p-2"},[n("b-alert",{staticClass:"mb-2",attrs:{show:t.dismissCountDown,variant:"warning"},on:{dismissed:function(e){t.dismissCountDown=0},"dismiss-count-down":t.countDownChanged}},[n("p",[t._v("Идет загрузка осталось примерно "+t._s(t.dismissCountDown)+" секунд...")]),n("b-progress",{attrs:{variant:"warning",max:t.dismissSecs,value:t.dismissCountDown,height:"4px"}})],1),n("b-alert",{staticClass:"mb-2",attrs:{variant:"success",show:t.isSuccess}},[t._v("Данные перенесены")]),n("b-alert",{staticClass:"mb-2",attrs:{variant:"danger",show:t.isOffline}},[t._v("Подключения до интернета отсутствует, попробуйте позже. ")]),n("b-button",{staticClass:"w-100",attrs:{disabled:0!==t.dismissCountDown,variant:"primary"},on:{click:t.loadProduct}},[t._v(" Загрузить ")])],1)]),n("h5",[t._v("Параметры")]),n("div",{staticClass:"row mb-2"},[n("div",{staticClass:"col"},[n("label",{attrs:{for:"bx_p"}},[t._v("Множетил белков")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.bx_param,expression:"bx_param"}],staticClass:"form-control",attrs:{type:"number",step:"0.1",id:"bx_p",placeholder:"множетил белков"},domProps:{value:t.bx_param},on:{input:function(e){e.target.composing||(t.bx_param=e.target.value)}}})]),n("div",{staticClass:"col"},[n("label",{attrs:{for:"bj_p"}},[t._v("Множетил жиров")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.bj_param,expression:"bj_param"}],staticClass:"form-control",attrs:{type:"number",step:"0.1",id:"bj_p",placeholder:"множетил жиров"},domProps:{value:t.bj_param},on:{input:function(e){e.target.composing||(t.bj_param=e.target.value)}}})]),n("div",{staticClass:"col"},[n("label",{attrs:{for:"bj_y"}},[t._v("Делитель углеводов")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.by_param,expression:"by_param"}],staticClass:"form-control",attrs:{type:"number",step:"1",id:"bj_y",placeholder:"делитель углеводов"},domProps:{value:t.by_param},on:{input:function(e){e.target.composing||(t.by_param=e.target.value)}}})])]),n("b-alert",{attrs:{show:"",variant:"warning"}},[t._v("Важно!!! Если не учитывать в ХЕ белки и жиры то значение должны быть 0 ")])],1)},r=[],s=(n("159b"),n("96cf"),n("1da1")),o={name:"Setting",data:function(){return{isSync:!1,isOffline:!1,isSuccess:!1,dismissSecs:3,dismissCountDown:0,product:[],category:[]}},computed:{isOnline:function(){return window.navigator.onLine},bx_param:{get:function(){return this.$store.state.option.bx_param},set:function(t){this.$store.commit("setOptionBx",t)}},bj_param:{get:function(){return this.$store.state.option.bj_param},set:function(t){this.$store.commit("setOptionBj",t)}},by_param:{get:function(){return this.$store.state.option.by_param},set:function(t){this.$store.commit("setOptionBy",t)}}},methods:{countDownChanged:function(t){this.dismissCountDown=t},createDBCategory:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$pouch.bulkDocs(t.category,{},"category").then((function(){})).catch((function(t){console.error(t)}));case 2:case"end":return e.stop()}}),e)})))()},createDBProduct:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t.product),e.next=3,t.$pouch.bulkDocs(t.product).then((function(){t.isSync=!1,t.isSuccess=!0,t.dismissCountDown=0})).catch((function(t){console.error(t)}));case 3:case"end":return e.stop()}}),e)})))()},loadProduct:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.dismissCountDown=t.dismissSecs,t.isSync=!0,t.product=[],t.category=[],t.isOnline){e.next=8;break}return t.dismissCountDown=0,t.isOffline=!0,e.abrupt("return");case 8:return e.next=10,t.$firebase.database().ref("category").once("value").then((function(e){e.forEach((function(e){t.category.push(e.val())})),t.createDBCategory()}));case 10:return e.next=12,t.$firebase.database().ref("product").once("value").then((function(e){e.forEach((function(e){t.product.push(e.val())})),t.createDBProduct()}));case 12:case"end":return e.stop()}}),e)})))()},setProduct:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$pouch.allDocs({include_docs:!0,attachments:!0}).then((function(e){setTimeout((function(){e.rows.forEach((function(e){delete e.doc._rev,t.$firebase.database().ref().child("product/".concat(e.id)).update(e.doc)}))}),1e3),console.log(e.rows)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))()}},mounted:function(){}},i=o,c=(n("a9ec"),n("2877")),u=Object(c["a"])(i,a,r,!1,null,"3483fc61",null);e["default"]=u.exports},a55c:function(t,e,n){},a9ec:function(t,e,n){"use strict";n("a55c")}}]);
//# sourceMappingURL=chunk-94422972.fc12d8e8.js.map